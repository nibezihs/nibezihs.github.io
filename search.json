[{"title":"1. 针孔相机模型","url":"/2025/10/25/1.%E7%9B%B8%E6%9C%BA%E6%A8%A1%E5%9E%8B/","content":"从本篇博客起，分享CS231a计算机视觉课程笔记，原笔记请参考CS231A官方网站.\r\n针孔相机模型\r\n这是一种最简单的相机模型，通过在三维物体和感光元件（胶片或传感器）之间放置一个带有小孔（光心）的屏障来实现。该模型在三维物体点与图像点之间建立了一对一的映射 。见下图，其中k轴取为光轴，i-j平面为屏障平面，Π′平面为像平面，P为物点，P’为像点，f为焦距。\r\n\r\n图1\r\n\r\n针孔相机模型面临清晰度和亮度的矛盾：孔径越大，清晰度越低，亮度越亮，可以使用透镜相机模型来改善。一个更简单的相机模型是弱透视投影（针对于针孔成像模型做了进一步简化，物体投影时各个点与小孔的距离都用物体的平均距离代替，即不存在近大远小了），进一步可简化为正交投影模型。\r\n为了将非线性的投影关系转化为线性变换，计算机视觉中通常使用齐次坐标，一个3维点(x, y, z)的齐次坐标为(x, y, z, 1)或者等价的(xh, yh, zh, h), h ≠ 0。\r\n相机投影矩阵\r\n投影矩阵M将三维齐次坐标点投影到二维齐次坐标点，记为  投影矩阵可分为相机内参 (intrinsic) 矩阵 K 和外参 (extrinsic) 矩阵，其中内参矩阵K有5个自由度，2个表示缩放（由焦距和像素决定），1个表示倾斜(offset)，2个表示偏移(skewness)，外参矩阵表示相机的位置和姿态。  其中α, β表示缩放，θ表示倾斜角，cx, cy表示原点偏移。假设空间坐标系下相机的姿态表示为R, T，即空间坐标系框架旋转R再平移T得到相机坐标系，总的相机投影方程为  注意P′为3维列向量，K为3 × 3矩阵，为3 × 4矩阵，Pw为4维列向量。相机投影矩阵有11个自由度，其中5个来自内部自由度，6个来自外部自由度。\r\n相机标定\r\n目的：从相机拍摄的图像出发推导相机的内部参数和外部参数。\r\n\r\n图2\r\n\r\n基本原理 ：标定通常使用一个带有已知尺寸的简单图案（例如棋盘格）的“标定板”来完成 。这个标定板定义了一个世界坐标系 。我们知道标定板上一些点的三维世界坐标 (P1, ..., Pn) 。通过拍摄图像，我们也能找到这些点对应的二维图像坐标 (p1, ..., pn) 。利用相机投影方程，可以建立一个方程组来求解投影矩阵M，每个点(Pi, pi)可以提供2个约束：  其中m1, m2, m3分别为M的第1、2、3行向量，为1 × 4矩阵。可以写成更紧凑的形式：  其中左边大矩阵的每个子矩阵均为1 × 4矩阵，大矩阵为2n × 12矩阵，左边第2个矩阵为12 × 1矩阵，一共2n条约束。2n &gt; 11时方程过定（M矩阵可以差1个常系数），因此理论上最少需要6个点来标定相机，实际中为了处理噪声还需要更多点。\r\n求解方法：上述过定方程可以转化为优化问题：  这可以使用奇异值分解（SVD）算法求解。确定M矩阵后进一步可以明确得到相机的内部参数和外部参数。\r\n退化配置：并非所有的点对配置都能求解。例如，如果所有点Pi都位于同一个平面上，系统就无法被求解，这种情况被称为退化配置 。\r\n实际镜头会引入畸变，图像放大率距离光学中心距离变化而变化，畸变导致投影方程不再是线性的，然而如果畸变是径向的，图像中2个坐标的比值将不受畸变影响，通过构建一个新的线性方程组，可以先利用 SVD 求解出投影矩阵 M 的前两行 m1 和 m2 。一旦 m1 和 m2 确定，第三行 m3 和畸变参数 λ 就可以表示为 m1 和 m2 的非线性函数 。这需要解决一个复杂度远低于原始问题的非线性优化问题 。本课程大部分内容会忽略畸变效应。\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"10. 最优估计","url":"/2025/10/25/10.%E6%9C%80%E4%BC%98%E4%BC%B0%E8%AE%A1/","content":"本文借助ai完成，仅供参考。\r\n本文《最优估计》（Optimal Estimation）由Bryan Chiang和Jeannette Bohg撰写，主要介绍了状态估计的基本概念和递归滤波器，包括贝叶斯滤波器、卡尔曼滤波器及其扩展。状态估计的目标是通过传感器观测和控制输入推断系统的隐藏状态，这对于人工智能代理的实时决策至关重要。以下是详细总结，重点强调重要公式和定性结论。\r\n\r\n1. 状态估计（State Estimation）\r\n\r\n核心问题：在部分可观察马尔可夫决策过程（POMDP）中，状态 xt 是隐藏的，需要通过观测序列 z1 : t 和控制输入序列 u1 : t 来推断。\r\n目标：计算后验概率分布 p(xt|z1 : t, u1 : t)，即信念（belief），表示给定所有数据下状态的概率分布。\r\n关键假设：\r\n\r\n状态完整性：状态是完整的，即系统满足马尔可夫性。\r\n转移模型：当前状态仅依赖于前一状态和控制输入，即 p(xt|xt − 1, ut)。\r\n测量模型：当前观测仅依赖于当前状态，即 p(zt|xt)。\r\n\r\n\r\n定性结论：状态估计通过概率模型处理不确定性，信念分布量化了对状态的不确定性。递归滤波器能够实时更新信念，而不需要存储完整历史。\r\n\r\n图1\r\n\r\n\r\n2. 贝叶斯滤波器（Bayes Filter）\r\n\r\n原理：递归滤波器，通过预测和更新步骤计算后验分布。复杂度与时间无关，适合实时应用。\r\n\r\n图2\r\n\r\n重要公式：\r\n\r\n预测步骤：使用转移模型和先前信念预测当前状态： p(xt|z1 : t − 1, u1 : t) = ∫p(xt|xt − 1, ut)p(xt − 1|z1 : t − 1, u1 : t)dxt − 1\r\n更新步骤：使用新观测修正预测，分母为归一化常数。 \r\n\r\n\r\n\r\n图3\r\n\r\n定性结论：贝叶斯滤波器常被视为概率模板，适用于任意分布，但积分计算通常棘手，除非状态离散或分布为高斯。\r\n\r\n3. 离散贝叶斯滤波器（Discrete Bayes Filter）\r\n\r\n适用场景：状态和观测为离散随机变量（有限个取值）。\r\n重要公式：\r\n\r\n信念向量：表示后验分布： \r\n预测步骤：矩阵乘法，转移矩阵 T(ut)​ 包含转移概率。\r\n\r\n\r\n \r\n\r\n更新步骤：矩阵乘法，测量矩阵 M(zt)​ 包含测量概率。   定性结论：离散贝叶斯滤波器通过矩阵运算高效实现，连续状态可通过离散化（直方图滤波器）近似。\r\n\r\n\r\n4. 卡尔曼滤波器（Kalman Filter）\r\n\r\n适用场景：动力学系统视角。线性高斯系统（状态转移和测量为线性，噪声为高斯）。\r\n系统模型： xt = Atxt − 1 + Btut + wt,  zt = Ctxt + vt 其中 wt ∼ 𝒩(0, Qt)，vt ∼ 𝒩(0, Rt)。\r\n重要公式：\r\n\r\n预测步骤： μt|t − 1 = Atμt − 1|t − 1 + Btut,  Σt|t − 1 = AtΣt − 1|t − 1AtT + Qt\r\n更新步骤： μt|t = μt|t − 1 + Kt(zt − Ctμt|t − 1),  Σt|t = Σt|t − 1 − KtCtΣt|t − 1 Kt = Σt|t − 1CtT(CtΣt|t − 1CtT + Rt) − 1 Kt 为卡尔曼增益，平衡预测与测量的权重。\r\n\r\n\r\n定性结论：\r\n\r\n卡尔曼滤波器通过均值和协方差高效表示高斯分布。\r\n卡尔曼增益的行为：\r\n\r\n若测量噪声 Rt → 0，则信任测量，状态直接由测量反推。\r\n若过程噪声小（Σt|t − 1 → 0），则信任预测，忽略测量。\r\n\r\n预测步骤增加不确定性（协方差增大），更新步骤减少不确定性（协方差减小），整体协方差逐渐收敛。\r\n\r\n\r\n5. 扩展卡尔曼滤波器（Extended Kalman Filter, EKF）\r\n\r\n适用场景：非线性系统，通过一阶泰勒展开线性化。\r\n重要公式：\r\n\r\n线性化：使用雅可比矩阵： \r\n预测步骤： μt|t − 1 = f(μt − 1|t − 1, ut),  Σt|t − 1 = AtΣt − 1|t − 1AtT + Qt\r\n更新步骤：与卡尔曼滤波器类似，但使用线性化矩阵。\r\n\r\n\r\n定性结论：EKF通过局部线性化处理非线性系统，但仅适用于轻度非线性情况（忽略高阶项），可能引入误差。\r\n\r\n总体定性结论\r\n\r\n状态估计是感知和决策的核心，递归滤波器允许实时更新。\r\n贝叶斯滤波器是理论基础，但实际中需简化（如离散化或高斯假设）。\r\n卡尔曼滤波器在线性高斯系统中最优且高效，但假设严格。\r\nEKF扩展了卡尔曼滤波器到非线性系统，但线性化可能限制精度。\r\n滤波器选择取决于系统特性（线性/非线性、噪声分布等）。\r\n\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"2. 单视图测量学","url":"/2025/10/25/2.%E5%8D%95%E8%A7%86%E5%9B%BE%E6%B5%8B%E9%87%8F%E5%AD%A6/","content":"2D变换\r\n\r\n等距变换（Isometric transformations）：保持距离不变，包括旋转和位移。 \r\n相似变换（Similarity transformations）：保持形状不变，在等距变换基础上增加了均匀缩放。 \r\n仿射变换（Affine transformations）：保持直线和直线的平行关系不变，是相似变换的泛化。 \r\n射影变换（Projective transformations）：保持直线，但不一定保持平行关系，是仿射变换的泛化。它能保持共线四点的交比（cross ratio，L13L24/L14L23）不变。 \r\n\r\n无穷远点和无穷远线\r\n\r\n2D直线的齐次坐标表示：2D直线可表示为3维列向量，直线上的点与其正交，即ax + by + c = 0  两条直线的交点即两条直线的向量表示的叉积。\r\n无穷远点：平行线在无穷远处相交，这个交点称为无穷远点，所以具有相同斜率的平行线都通过1个无穷远点，齐次坐标表示为​。\r\n无穷远线：无穷远点共线，组成无穷远线。2D无穷远线为。\r\n射影变换可以将无穷远点和无穷远线映射到非无穷远点和非无穷远线，而仿射变换则不会。直线的射影变换可通过射影变换的保线性推导： x′ = Hx,  xTl = xTHTH − Tl = 0 = x′Tl′,  l′ = H − Tl\r\n\r\n消隐点和地平线\r\n\r\n3D平面和直线的齐次坐标表示：3D平面可表示为4维列向量（ax + by + cz + d = 0），3D直线表示为两个平面的交线，难以直接表示，可以用方向（3维列向量）表示一族平行直线。\r\n消隐点（Vanishing Point）：3D空间中平行线的交点在图像平面上的投影点不再是无穷远点，这个投影点称为消隐点。相机参考系下（省略外部参数矩阵），消隐点v与相机参数K和直线方向d的关系为： v = Kd 这里v是3维列向量（齐次坐标），K是3 × 3矩阵，d是3维列向量。推导核心是注意到这簇平行线交成的无穷远点的齐次坐标表示为。\r\n地平线（Horizion Line，消隐线）：3D空间中某平面的无穷远线（该平面的各平行线簇的无穷远点组成的直线）在图像平面的投影不再是无穷远线，这个投影线称为该平面的地平线，地平线通过图像中相应的消隐点，地平线与其3D平面的法线n存在关系（在相机参考系下）： n = KTlhoriz 这意味着如果相机已校准，通过识别地平线可以估计平面在3D空间的方向。这里n和lhoriz​是3维向量。\r\n\r\n图1\r\n\r\n无穷远面：3D空间中各平面的无穷远线共面，并组成无穷远面，可在齐次坐标下表示为​\r\n两组平行线与其消隐点之间的关系：\r\n\r\n\r\n图2\r\n\r\n如果3D空间中有2组平行线，其方向分别为d1和d2，它们在图像中的消隐点分别为v1和v2，两组平行线的夹角θ和消隐点之间存在如下关系：  其中ω = (KKT) − 1。它提供了一种单视图测量学的方法，如果知道相机的内参，通过识别图像中的消隐点，即可计算3D空间中对应平行线的夹角。如果已知两组平行线在3D空间中正交，公式可简化为v1Tωv2 = 0，提供了一种校准相机的方法。（见下图）\r\n其平面和消隐线推广是，如果识别出两个平面的消隐线l1和l2，可以通过以下公式计算3D空间中这两个平面的夹角θ：  \r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"3. 对极几何","url":"/2025/10/25/3.%E5%AF%B9%E6%9E%81%E5%87%A0%E4%BD%95/","content":"对极几何\r\n对极几何（Epipolar Geometry）是描述两个摄像头在观察同一三维场景时，它们之间所存在的几何关系 。它对于解决仅从单个二维图像无法重建完整三维世界的问题至关重要 。\r\n\r\n图1\r\n\r\n\r\n基线（Baseline）：连接两个摄像机中心 O1 和 O2 的直线 。\r\n对极平面（Epipolar Plane）：由两个摄像机中心和被观察的三维点 P 共同定义的平面 。\r\n对极点（Epipoles）：基线与两个图像平面相交的点，分别记为 e 和 e′ ，即对方相机中心在本相机图像平面的投影点。\r\n对极线（Epipolar Lines）：对极平面与两个图像平面相交形成的直线，即对方相机的相机中心与观察点的连线在本相机图像平面的投影，观察点在本相机的投影一定在本相机一侧对极线上。\r\n当两个图像平面平行时，对极点将位于无穷远处，对极线将平行于每个图像平面。\r\n基线和对极点只与相机相对位置和姿态有关，对极平面和对极线还与观察点有关。\r\n\r\n本质矩阵与基础矩阵\r\n\r\n坐标系描述。在两个相机中心按规范各建立一套坐标系，使用R, T表示相机2相对相机1的位置和姿态，即O1处的参考系旋转R再平移T后与O2处的参考系重合。默认各投影点和对极点分别用本相机参考系表述，即p′默认表示p’点在相机2的参考系的坐标。（这里用p表示点，p表示坐标）\r\n本质矩阵（Essential Matrix）：用于描述规范相机（canonical cameras，K = K′ = I，即摄像机小孔中心在坐标系原点，像平面在Z=1处，世界坐标系与相机坐标系重合）的对极关系，只与两相机相互的位置和姿态关系有关。 E = [T×]R 推导过程：p’点在相机1参考系的坐标为Rp′ + T，由于其在对极平面上，T × (Rp′ + T) = T × Rp′ = [T×]Rp′ 垂直于对极平面，于是pT[T×]Rp′ = 0，取E = [T×]R，得到pTEp′ = 0\r\n本质矩阵具有如下性质：\r\n\r\npTEp′ = 0​\r\nl = Ep′是相机1的对极线，l′ = ETp是相机2的对极线。（在各自相机参考系下）\r\nEe′ = ETe = 0\r\n\r\n3可自推，可推2，2也可推3，无论观察点如何变化，两对极点始终在对极线上\r\n\r\n3 × 3矩阵，秩为2，自由度为5（2个平移自由度，3个旋转自由度，注意E可以乘一个常数因子，所以说它只描述了平移的方向）\r\n\r\n基础矩阵（Fundamental Matrix）：适用于更一般的相机，在本质矩阵基础上添加了相机内参信息，定义为 F = K − TEK′ − 1 性质：\r\n\r\npTFp′ = 0\r\nl = Fp′是相机1的对极线，l′ = FTp​是相机2的对极线。（在各自相机参考系下）\r\nFe′ = FTe = 0​\r\n3 × 3​矩阵，秩为2，自由度为7（可以乘一个因子，行列式为0，自由度=9-2=7）\r\n\r\n\r\n八点算法\r\n\r\n八点算法是一种在不知道相机内外参数的情况下，仅凭两张不同角度的图像中的至少8个对应点来估算基础矩阵的方法，每对对应点提供一个线性约束piTFpi′ = 0。基础矩阵自由度只有7，但是那样需要利用行列式为0这一非线性约束，为了计算方便通常使用8个或以上的点。设pi = (ui, vi, 1)T，pi′ = (ui′, vi′, 1)T​，8个点可建立方程  N个点情形可简写为 Wf = 0 其中W是N × 9矩阵，f是9维列向量，可通过SVD来求解基本矩阵，考虑到基本矩阵不满秩，SVD方法的解可能给出一个满秩解F̂，还需要求解优化问题： \r\n八点算法的缺点：像素坐标值往往很大，点的位置相似，导致W拥有一个非常大的奇异值，而其他奇异值相对较小，使得SVD的结果不够理想。解决办法是先对图像进行预处理（平移和缩放），改进的八点算法称为归一化八点算法。\r\n预处理步骤：首先，新坐标系原点应在图像中间（平移），然后，变换后的图像点和原点的平均平方距离为2像素。记为qi = Tpi，qi′ = T′pi′，然后用(qi, qi′)计算基本矩阵Fq，原基本矩阵为F = TTFqT′。\r\n\r\n图像校正\r\n\r\n图像校正（Image Rectification）是将一对图像进行变换，使得它们的图像平面相互平行。假设校正后图像平面只是在水平方向平移，对极点将位于无穷远处，对应点将具有相同的y​方向坐标。 \r\n校正方法：找出两个单应矩阵（Homographs）H1和H2。首先通过八点算法计算基础矩阵，然后求解线性方程找到对极点，利用对极点的位置计算出能将它们映射到无穷远处的单应矩阵。\r\n寻找对极点：对极点是所有对极线的交点，考虑误差可能需要利用多条对极线。\r\n寻找第1个单应矩阵（H2）：首先将图像中心点平移T到原点(0, 0, 1)T，然后使用一个旋转矩阵R将对极点e′旋转到水平轴上(f, 0, 1)T，最后使用一共矩阵G将(f, 0, 1)T投影到(f, 0, 0)T，最后再平移回来，总的单应矩阵为H2 = T − 1GRT\r\n寻找第2个单应矩阵（H1）：可以通过求解一个最小化问题来找到 H1​，这个最小化问题旨在使校正后的对应点之间的平方距离之和最小 。\r\n\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"4. 立体系统和运动中的结构","url":"/2025/10/25/4.%E7%AB%8B%E4%BD%93%E7%B3%BB%E7%BB%9F%E5%92%8C%E8%BF%90%E5%8A%A8%E4%B8%AD%E7%9A%84%E7%BB%93%E6%9E%84/","content":"三角测量\r\n三角测量（Triangulation）\r\n从两个或多个已知相机内外参数的图像中恢复3D点位置。即已知两个相机的内参K, K′和外参（相对位姿R, T），已知图像中的对应点p, p′，目标找到它们在3D空间中的对应点P。由于噪声和标准误差，两条视线（相机中心到图像点连线）可能不相交。\r\n线性方法\r\np = MP = (x, y, 1), p′ = M′P = (x′, y′, 1)，利用叉积约束p × MP = 0，构造线性方程组AP = 0，其中  Mi是M矩阵的第i行，A是4 × 4矩阵。此方法可方便地拓展到多视图情形（在A矩阵加行），可利用SVD求解，缺点是不具备投影不变性。\r\n非线性方法\r\n使用重投影误差和的最小二乘估计值P̂来估计点P minP̂∥MP̂ − p∥2 + ∥M′P̂ − p′∥2 多视图情形只需将每幅图的重投影误差相加。使用高斯-牛顿算法进行迭代优化。\r\n仿射运动恢复结构\r\n运动结构问题\r\nStructure from Motion Problem，SfM Problem，从多幅图像中同时恢复3D场景结构（3D点的位置）和相机参数（相机的投影矩阵）。即有m个相机，其投影矩阵为Mi，所有图像都包含场景中的n个空间点Xj，Xj点在第i张图像的投影点坐标为xij，目标是利用{xij}同时求解{Mi}和{Xj}。\r\n仿射运动结构问题\r\n假设相机是弱透视的（仿射的），弱透视相机的投影矩阵形式为  作为对比，普通针孔相机的最后一行为，这表示一种仿射变换，可以简单地使用欧氏坐标而非齐次坐标来表示投影点： x = AX + b 其中A是2 × 3矩阵，b是2维列向量，表示偏移。每个点为每个相机提供2个约束方程，每个相机有8个参数，每个空间点有3个参数，因此当 2mn &gt;  = 8m + 3n 时，问题可解。由于最后结果还可以相差一个仿射矩阵，实际要解的变量有8m + 3n − 3个未知数。\r\nTomasi-Kanade 因子分解法\r\n用于解决仿射运动结构问题，包含两个步骤：数据中心化和矩阵分解\r\n\r\n数据中心化，将每张图像的数据中心化，即  消去bi因子，使得新坐标只取决于仿射矩阵Ai： x̂ij = AiX̂j\r\n矩阵分解。将中心化的数据合并为一个m × n维测量矩阵D：  D可以分解为2m × 3维运动矩阵M和3 × n维结构矩阵S的乘积，其中  注意D的秩是3，因为矩阵乘积的秩不会超过因子矩阵的秩。对D进行奇异值分解，只有前3个奇异值非0，得到  由于测量误差，D的秩可能大于3，但是上述分解仍是范数意义上的最佳低秩近似。注意到U3正好是2m × 3矩阵，V3T是3 × n矩阵，这里分解的方式不唯一，Tomasi和Kanade取一个稳健的选择 \r\n重建的模糊性：分解法得到的解存在固有的仿射模糊性（affine ambiguity）。这意味着即使我们得到了一组解，任何通过可逆矩阵 A 的仿射变换 MA 和 A − 1S​ 也能得到相同的解。这导致我们无法恢复场景的绝对尺寸、位置和朝向。如果相机是经过校准的，这种模糊性会降为相似性模糊性（similarity ambiguity），即重建结果在旋转、平移和缩放的变换下保持一致。（直观解释：对一个已标定的相机，相似性模糊性表示物体可以在近处且比较小，也可能在远处且比较大）\r\n\r\n透视运动恢复结构\r\n\r\n在上节基础上考虑一般的透视相机，同理运动矩阵和结构矩阵最多被确定到相差一个投影变换H，其中H是4 × 4维的3D投影矩阵，MH − 1和HS的效果相同。我们一共有2mn条方程，需要解11m + 3n − 15个未知数（15是因为可以相差一个4 × 4投影矩阵，投影矩阵有15个自由度）\r\n\r\n代数方法：\r\n\r\n将第一个相机设为规范形式 M1 = [I ∣ 0],  M2 = [A ∣ b]\r\n构造基本矩阵关系（推导见讲义，基本矩阵可以通过八点算法计算） F = [b]×A\r\n求解b（本质是极点） FTb = 0\r\n求解A A =  − [b]×F\r\n最终相机矩阵 M̃1 = [I ∣ 0],  M̃2 = [ − [b]×F ∣ b]\r\n\r\n从本质矩阵恢复运动：本质矩阵满足\r\nE = KTFK = [t]×R 分解E为R和t，使用SVD，相差一个缩放因子的程度下以下等式成立 E = UΣVT,  Σ = diag(1, 1, 0) 可以推导出 [t]× = UZUT,  R = UWVT 或 UWTVT 其中W矩阵和Z矩阵定义如下。  W矩阵对应一个沿着z轴的矢量的叉积矩阵，上式第一个等式表示存在正交变换将任意矢量t旋转到z轴方向。因此平移矢量为 t =  ± u3  (第三列单位向量) 共有4种可能的 (R, t) 组合，需通过三角验证选择正确解。 （见下图，4种组合中只有一组是符合要求的，即空间点同时在两个像平面的前方）\r\n\r\n图1\r\n\r\n束调整\r\n多张图像情况，可能存在某些空间点并非在每张图像上都存在，此时常用三角测量的非线性方法，即最小化重投影误差法 minMi, Xj∑i, j∥MiXj − xij∥2 上式求和中只包含图像中有的点，常用算法是高斯-牛顿法和列文伯格-马夸特法，特点：可处理大量视图和部分可见点、需良好的初始值（通常由因子分解或代数方法提供）、计算量大，但精度高。\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"5. 主动和体积立体视觉","url":"/2025/10/25/5.%E4%B8%BB%E5%8A%A8%E5%92%8C%E4%BD%93%E7%A7%AF%E7%AB%8B%E4%BD%93%E8%A7%86%E8%A7%89/","content":"从本篇开始，懒得自己码了，接下来的笔记是借助ai完成的，仅供参考。\r\n本文是CS231A课程笔记5，标题为“Active and Volumetric Stereo”，作者为Kenji Hata和Silvio Savarese。文章主要介绍了两种替代传统立体视觉的三维重建方法：主动立体视觉（Active Stereo）和体积立体视觉（Volumetric Stereo）。传统立体视觉依赖于对应点匹配（correspondence problem）进行三角测量，但对应问题难以解决。本文方法通过投影模式或体积内一致性检查来规避这一挑战。以下为详细内容总结。\r\n\r\n1. 引言\r\n\r\n传统立体视觉的挑战：通过对应点 (p) 和 (p’) 估计3D点 (P) 时，对应问题（如何确定 (p) 和 (p’) 对应同一3D点）是主要难点。\r\n本文重点：介绍主动立体和体积立体两种替代技术，用于高效重建3D结构。\r\n\r\n\r\n2. 主动立体视觉（Active Stereo）\r\n基本思想\r\n\r\n用一个投影仪（projector）替换一个相机，投影可识别的模式（如条纹）到物体上，从而简化对应问题。\r\n投影仪与相机形成极几何（epipolar geometry），投影仪的图像平面称为虚拟平面。\r\n图1：投影点 (p) 到3D空间产生点 (P)，在相机中观测为 (p’)。由于投影内容已知，对应点 (p’) 易确定。\r\n\r\n图1\r\n\r\n\r\n条纹投影策略\r\n\r\n投影垂直条纹 (s)或复杂图案 而非单点，在3D空间产生条纹 (S)，在相机中观测为 (s’)。\r\n若投影仪与相机平行或已校正，可通过相交 (s’) 与水平极线找到对应点，然后使用三角测量重建条纹 (S) 上所有3D点。\r\n通过扫描条纹 across 场景（对精心设计的复杂图案无需扫描），重建整个物体形状。\r\n图2：展示多颜色线条投影设置。\r\n\r\n图2\r\n\r\n\r\n系统校准\r\n\r\n投影仪和相机需校准：先校准相机，再投影已知条纹到校准相机，利用相机观测估计投影仪内参和外参。\r\n\r\n优缺点与扩展\r\n\r\n优点：高精度（如斯坦福团队扫描Pieta达亚毫米级）。\r\n低成本替代：使用阴影（stick shadow）投影，但精度低且校准复杂。\r\n局限性：单条纹投影慢，无法实时捕获变形。\r\n扩展：单帧投影多色条纹（如Microsoft Kinect），通过颜色编码唯一标识条纹，实现实时3D视频捕获。\r\n\r\n\r\n3. 体积立体视觉（Volumetric Stereo）\r\n基本思想\r\n\r\n反转问题：假设3D点位于已知有限体积内，将假设点投影回多个校准相机，检查投影一致性。\r\n下图：展示体积立体设置，适用于有界物体重建。\r\n\r\n图3\r\n\r\n一致性定义因方法而异，本文介绍三种技术：空间雕刻、阴影雕刻和体素着色。\r\n\r\n3.1 空间雕刻（Space Carving）\r\n核心概念\r\n\r\n利用物体在多视图中的剪影（silhouette）进行一致性检查。\r\n视觉锥体（visual cone）：由相机中心和图像剪影定义的锥体，物体必位于其内。\r\n视觉外壳（visual hull）：多视图视觉锥体的交集 ，是物体的保守估计。\r\n展示剪影、视觉锥体和视觉外壳。\r\n\r\n图4\r\n\r\n\r\n图5\r\n\r\n\r\n算法步骤\r\n\r\n定义工作体积（如相机包围的空间），划分为体素（voxel）网格。\r\n对每个体素，投影到所有视图，若在某视图剪影外则剔除。\r\n剩余体素形成视觉外壳。\r\n\r\n局限性\r\n\r\n计算复杂度：体素数量随分辨率立方增长，可用八叉树优化。\r\n依赖视图数量：视图少则估计松散，视图多则更精确。\r\n剪影准确性：剪影过保守或缺失导致重建不精确。\r\n无法处理凹面：空间雕刻不能重建凹面（除非是穿透性空洞）。\r\n\r\n图6\r\n\r\n\r\n3.2 阴影雕刻（Shadow Carving）\r\n核心概念\r\n\r\n利用自阴影（self-shadows）增强空间雕刻，以处理凹面。\r\n设置类似空间雕刻，但添加可控光源阵列。\r\n\r\n图7\r\n\r\n过程：\r\n\r\n初始空间雕刻得到体素网格。\r\n在每个视图下，开关光源产生自阴影，识别阴影区域。\r\n构建阴影视觉锥体，与相机视觉锥体结合：若体素同时位于两者内（下图的黑色体素），则剔除。\r\n\r\n\r\n图8\r\n\r\n\r\n优缺点\r\n\r\n优点：能重建凹面物体。\r\n缺点：\r\n\r\n计算更慢（若有 N 个光源，时间约为空间雕刻的 N+1 倍）。\r\n无法处理反射或低反照率区域（阴影检测难）。\r\n\r\n\r\n3.3 体素着色（Voxel Coloring）\r\n核心概念\r\n\r\n使用颜色一致性而非轮廓一致性。对每个体素，投影到多视图比较颜色，若匹配则标记为物体部分。、\r\n\r\n图9\r\n\r\n关键假设：物体必须是朗伯体（Lambertian），即颜色不随视角变化。\r\n歧义问题：普通体素着色可能产生多重解（下图）。\r\n\r\n图10\r\n\r\n解决方案：引入可见性约束（visibility constraint）：\r\n\r\n按层遍历体素（从近到远）。\r\n检查体素是否被至少两个相机可见（当某个体素被标记为物体表面后，它就会遮挡住它后面的体素。在后续处理中，被遮挡的体素在相应的相机视图中将被视为“不可见”。）。\r\n确保处理顺序以处理遮挡。\r\n\r\n\r\n优缺点\r\n\r\n优点：同时获取形状和纹理。\r\n缺点：朗伯体假设、相机位置限制（需特定处理顺序）。\r\n\r\n\r\n总结\r\n\r\n主动立体视觉：通过投影模式简化对应问题，适用于高精度重建，但可能受成本限制。\r\n体积立体视觉：通过体积内一致性检查避免对应问题，包括空间雕刻（基于剪影）、阴影雕刻（基于阴影）和体素着色（基于颜色）。各有优缺点，适用于不同场景。\r\n共同点：均需系统校准，且重建质量依赖视图数量、模式精度和物体属性。\r\n\r\n本文提供了从传统方法到现代3D重建技术的过渡，强调实用性及局限性，为实际应用提供理论基础。\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"6. 拟合和匹配","url":"/2025/10/25/6.%E6%8B%9F%E5%90%88%E5%92%8C%E5%8C%B9%E9%85%8D/","content":"本文借助ai完成，仅供参考。\r\n本文档《Fitting and Matching》由Bryan Chiang和Silvio Savarese撰写，主要介绍了参数模型拟合的基本方法，包括最小二乘法、RANSAC和Hough变换。拟合的目标是找到一组模型参数，使模型能最佳描述观测数据，通过最小化拟合误差实现。文档重点讨论了这些方法的数学原理、公式推导、优缺点以及实际应用中的注意事项。以下是文档的详细总结，尤其是重要公式部分。\r\n\r\n1. 概述\r\n\r\n拟合的目标是找到一个参数模型来描述观测数据，通过最小化拟合误差来优化参数。\r\n例子：直线拟合、计算2D单应性矩阵 H 或基础矩阵 F（如八点算法）。\r\n\r\n\r\n2. 最小二乘法\r\n普通最小二乘法\r\n\r\n用于直线拟合 y = mx + b，最小化y方向的残差平方和。\r\n误差公式：  其中 \r\n闭式解（当 X 满秩，即XTX可逆）： w = (XTX) − 1XTY\r\n问题：对垂直线（m 未定义）数值不稳定。\r\n\r\n总最小二乘法\r\n\r\n使用直线表示 ax + by + c = 0​，考虑点到直线的正交距离。\r\n\r\n图1\r\n\r\n距离公式： \r\n约束 a2 + b2 = 1，误差变为： \r\n可以证明最小二乘曲线一定经过质心 x̄, ȳ，通过数据中心化，令 c =  − ax̄ − bȳ，误差简化为： E = ∥Xw∥2,  w = [a, b]T,  ∥w∥ = 1 其中 \r\nSVD求解：对 X = USVT，最小化 ∥Xw∥ 的解w是 V​ 的最后一列（对应最小奇异值）。（SVTw理解为取w沿V各列向量方向分量，再分别用对应奇异值缩放构成矢量，U是正交矢量对模无影响，因此最小情况对应w完全沿着最小奇异值的V的那列方向）\r\n缺陷：对残差的平方依赖性导致对异常值敏感\r\n\r\n鲁棒成本函数\r\n\r\n最小二乘法对异常值敏感，引入鲁棒函数限制异常值影响。\r\n公式：  其中 ui 是残差，σ​ 是尺度参数（控制对异常值的容忍度）。\r\nu较小时接近平方依赖，u足够大时误差稳定在1不变。\r\nσ过大：渐近到最小二乘误差，鲁棒性不足。σ​过小：将大部分点视为异常值，拟合能力不足。\r\n鲁棒误差函数非线性，需要迭代方法。常在初始时使用最小二乘法，然后用鲁棒非线性误差函数迭代。\r\n\r\n图2\r\n\r\n\r\n\r\n3. RANSAC\r\n\r\n随机抽样一致算法（random sample consensus），用于处理异常值和缺失数据。\r\n步骤：\r\n\r\n随机选择拟合1次所需的最小样本点（如直线需2点，八点算法拟合F需8点，拟合3 × 3单应矩阵最少需4个对应关系，其中每个对应关系有2个x, y坐标）。\r\n拟合模型。\r\n计算内点集（残差 r &lt; δ 的点）。\r\n重复多次，选择内点集最大的模型。\r\n\r\n迭代次数公式（保证概率 p 下至少一次采样无异常值）：  其中 ϵ 是异常值比例，s 是单次拟合。（p = 1 − (1 − (1 − ϵ)s)n）\r\n\r\n\r\n4. Hough变换法\r\n\r\nHough空间：即参数空间。y = mx + n关系使得原空间的一点 (x, y) 对应Hough空间的一条直线 n = y − mx，Hough空间的一点 (m, n) 对应原空间的一条直线 y = mx + n。\r\n投票机制：一种投票方法。将Hough空间离散化为长宽为w的网格，初始所有网格分数为0，每个数据点(x, y)的Hough变换直线为其经过的网格分数加1，最终分数最多网格对应的参数(m, n)获胜。缺点：参数空间无界，需要大量计算和内存。\r\n极坐标参数化：直线还可以用(ρ, θ)参数化 xcos θ + ysin θ = ρ 其中 ρ 是原点到直线的距离（有界，上界是图像大小，或者数据集中任意两点距离上界），θ ∈ [0, π] 表示直线的法线与x轴夹角​。\r\n\r\n图3\r\n\r\n每个图像点对应Hough空间中的正弦曲线，投票给网格细胞，最高票数对应拟合直线。\r\n参数：网格大小 w 影响噪声容忍度和精度。过小的 w 会导致噪声容忍度低（噪声导致不同点的投票分散到不同的小网格，无法形成明显峰值），过大的 w 会降低精度。\r\n\r\n\r\n关键公式总结\r\n\r\n\r\n\r\n方法\r\n公式\r\n说明\r\n\r\n\r\n\r\n\r\n最小二乘误差\r\nE = ∥Y − Xw∥2\r\n普通最小二乘\r\n\r\n\r\n最小二乘解\r\nw = (XTX) − 1XTY\r\n闭式解\r\n\r\n\r\n总最小二乘法\r\nE = ∥Xw∥2,  ∥w∥ = 1\r\n约束优化\r\n\r\n\r\n鲁棒成本函数\r\n\r\n抑制异常值\r\n\r\n\r\nRANSAC迭代次数\r\n\r\n保证采样概率\r\n\r\n\r\nHough变换\r\nxcos θ + ysin θ = ρ\r\n极坐标参数化\r\n\r\n\r\n\r\n\r\n结论\r\n\r\n最小二乘法适合无异常值数据，但对异常值敏感。\r\nRANSAC和鲁棒成本函数提高对异常值的鲁棒性。\r\nHough变换是投票式拟合，但参数调优复杂。\r\n\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"7. 表示和表示学习","url":"/2025/10/25/7.%E8%A1%A8%E7%A4%BA%E5%92%8C%E8%A1%A8%E7%A4%BA%E5%AD%A6%E4%B9%A0/","content":"本文借助ai完成，仅供参考。\r\n以下是对文档《Representations and Representation Learning》的详细总结，重点提取了定性重要结论和重要公式，并按照章节结构进行梳理。\r\n\r\n一、状态与表示（States and Representations）\r\n重要概念：\r\n\r\n状态：对动态系统的压缩描述，包含时变量（如位姿、速度）和固定参数（如肢体长度）。\r\n表示选择：状态可以用不同方式表示（如欧拉角、四元数、坐标系），取决于任务需求。\r\n状态可以学习：表示不仅可手工设计，也可通过数据学习。\r\n\r\n重要公式与模型：\r\n1. 马尔可夫性质（Markov Property）\r\nP(xt + 1|xt, xt − 1, …, x1) = P(xt + 1|xt) - 结论：未来状态仅依赖于当前状态，与过去无关。适用于完全可观测系统（马尔可夫链）。\r\n\r\n图1\r\n\r\n2. 隐马尔可夫模型（HMM）\r\nP(zt|xt, xt − 1, …, x1) = P(zt|xt) - 结论：观测仅依赖于当前状态，状态是隐藏的。适用于部分可观测系统。\r\n\r\n图2\r\n\r\n3. 引入控制输入（MDP/POMDP）\r\nxt + 1 = f(xt, ut) - 结论：在决策问题中，状态演变受动作或控制输入 ut 影响，自然问题是如何选择最优动作ut，由此推广为马尔可夫决策过程（MDP, Markov decision process）或部分可观测马尔科夫决策过程（POMDP，partially observable Markov decision process）。\r\n\r\n二、生成式与判别式方法（Generative vs. Discriminative）\r\n重要概念：\r\n\r\n生成式模型：建模联合分布 p(z, x)，使用先验 p(x) 和似然 p(z|x)，通过采样和比较进行推理。\r\n判别式模型：直接建模后验 p(x|z)​，如PoseCNN直接从图像映射到位姿。\r\n\r\n图3\r\n\r\n\r\n重要结论：\r\n\r\n生成式方法灵活，可融入先验知识；判别式方法通常更高效、准确。\r\n选择取决于任务需求、数据量和可解释性要求。\r\n\r\n\r\n三、表示学习（Representation Learning）\r\n1. 表示的类型（在视觉任务中）\r\n\r\n输入表示：原始传感器数据（如图像、点云）。\r\n中间表示：压缩、低维向量，总结输入信息。\r\n输出表示：高层语义信息（如类别标签、6D位姿）。\r\n\r\n2. 好表示应具备的特性（Bengio et al.）\r\n\r\n紧凑性：最小化冗余\r\n解释性：能表达多种输入变化\r\n解耦性：不同因素独立表示\r\n层次性：抽象概念由底层特征构建\r\n下游任务友好：提升推理、预测、决策性能\r\n\r\n3. 传统CV vs 现代CV\r\n传统CV（手工特征）\r\n\r\n优点：可解释性强，适用于高风险领域（如医疗、法律）\r\n缺点：依赖专家知识，设计耗时，表达能力有限\r\n\r\n现代CV（学习表示）\r\n\r\n优点：表达能力更强，下游任务性能更好（如CNN）\r\n缺点：黑箱性，可解释性差\r\n可视化方法：如t-SNE降维、激活图分析（Zeiler &amp; Fergus）显示CNN学到的特征与传统特征相似（边、纹理、部件）\r\n\r\n\r\n四、无监督与自监督学习（Unsupervised &amp; Self-Supervised Learning）\r\n重要模型：自编码器（Autoencoder）\r\n\r\n图4\r\n\r\n\r\n目标：学习压缩表示 z，使得解码器能重构输入 \r\n损失函数：重构误差（如MSE）\r\n结论：\r\n\r\n无需标签即可学习有意义表示（自编码器执行无监督学习）\r\n中间表示 z 可作为其他任务的输入（如分类）\r\n自监督学习通过掩码部分输入作为预测目标，进一步减少对标签的依赖（下图执行自监督学习，输入图像的下半部分，预测图像的上半部分）\r\n\r\n图5\r\n\r\n\r\n\r\n\r\n五、重要公式总结\r\n\r\n\r\n\r\n公式\r\n含义\r\n应用场景\r\n\r\n\r\n\r\n\r\nP(xt + 1 ∣ xt) = P(xt + 1 ∣ xt, …)\r\n马尔可夫性质\r\n动态系统建模\r\n\r\n\r\nP(zt ∣ xt) = P(zt ∣ xt, …)\r\n观测独立性\r\n隐马尔可夫模型\r\n\r\n\r\nxt + 1 = f(xt, ut)\r\n带控制的状态转移\r\nMDP/POMDP\r\n\r\n\r\n\r\n自编码器重构\r\n无监督表示学习\r\n\r\n\r\n\r\n\r\n六、核心结论总结\r\n\r\n表示是任务驱动的：不同任务需要不同的输入、中间、输出表示。\r\n学习表示优于手工设计：在现代CV中，学习得到的表示通常更强大，但可解释性差。\r\n无监督/自监督学习是趋势：可在无标签数据上学习有用表示，缓解标注成本问题。\r\n表示质量可通过下游任务评估：好表示应提升分类、检测、决策等任务的性能。\r\n\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"8. 单目深度估计和特征跟踪","url":"/2025/10/25/8.%E5%8D%95%E7%9B%AE%E6%B7%B1%E5%BA%A6%E4%BC%B0%E8%AE%A1%E5%92%8C%E7%89%B9%E5%BE%81%E8%B7%9F%E8%B8%AA/","content":"本文借助ai完成，仅供参考。\r\n这篇题为《Monocular Depth Estimation and Feature Tracking》的学术文章由 Bryan Chiang 和 Jeannette Bohg 撰写，系统性地介绍了单目深度估计和特征跟踪两大计算机视觉任务，并重点阐述了如何利用表示学习方法（包括监督、无监督和自监督学习）来解决这些问题。以下是内容的详细总结，重点包括核心方法、关键公式和定性结论。\r\n\r\n一、单目深度估计\r\n1. 背景与基础\r\n\r\n深度估计是许多视觉任务（如3D重建、机器人抓取、自动驾驶）的基础。\r\n被动方法（如单目或立体视觉）优于主动方法（如LIDAR），因其无需额外硬件、适应性强。\r\n深度估计可视为对应问题：在多张图像中找到同一3D点的投影位置。\r\n深度估计分为立体深度估计（从多张图像估计深度）和单目深度估计（从单张图像估计深度），后者在数学上不可能，但人眼可通过视角、缩放、光线、遮挡等线索从单张图像估计深度。后面的监督、无监督、自监督学习方法即学习单目深度估计。\r\n\r\n2. 立体视觉与视差\r\n\r\n在立体视觉中，通过对极几何和视差来估计深度。（假设相机内参K已知，图像被校正，即图像平面彼此平行）\r\n\r\n图1\r\n\r\n视差公式： d = p′u − pu\r\n深度与视差成反比：  其中 f 是焦距，b​ 是基线长度。\r\n难点：找到两张图像中相对应的点。\r\n\r\n3. 监督学习方法\r\n\r\n使用CNN从单张RGB图像预测每个像素的视差。\r\n损失函数衡量预测深度与真实深度之间的差异。\r\n由于单目深度存在尺度不确定性，提出尺度不变误差。\r\n\r\n图2\r\n\r\n\r\n4. 无监督学习方法（以Godard et al. 2017为例）\r\n\r\n无需真实深度标签，仅使用立体图像对。\r\n通过图像重建作为监督信号：\r\n\r\n使用左图预测视差图 dl，通过可微双线性采样从右图重建左图 Ĩl​。（下图是更复杂的架构）\r\n\r\n图3\r\n\r\n\r\n损失函数包含三个部分（以左图为例，右图对称）：\r\nCs = αap(Capl + Capr) + αds(Cdsl + Cdsr) + αlr(Clrl + Clrr)\r\n\r\n外观匹配损失（结合L1和SSIM）： \r\n平滑性损失（边缘感知）： \r\n左右一致性损失： \r\n\r\n\r\n5. 自监督学习方法（以Godard et al. 2019为例）\r\n\r\n将深度估计视为新视角合成问题。\r\n使用单目视频序列，当前帧 It 预测深度 Dt，使用相邻时间帧It′预测姿势变化Tt → t′，使用It和Dt重建3D环境，作用Tt → t′得到相邻时刻t′的3D环境，进而预测t′时刻的新视角Ĩt′，并利用相邻帧 It′​ 作为监督。\r\n\r\n图4\r\n\r\n光度误差作为损失：  Lp = ∑t′pe(It, It′ → t)\r\n\r\n\r\n二、特征跟踪与密集描述符学习\r\n1. 任务定义\r\n\r\n特征跟踪：在图像序列中追踪一组2D点的位置。\r\n传统方法（如SIFT、Harris角点）是稀疏的（只能追踪某些关键帧及其附近邻域）、手工设计的。\r\n\r\n2. 学习密集描述符（以Dense Object Nets为例）\r\n\r\n目标：为每个像素（因而是密集的）学习一个D维描述符，便于跨帧匹配。\r\n使用卷积编码器-解码器网络 f( ⋅ )​ 输出密集描述符。\r\n\r\n图5\r\n\r\n损失函数包含两部分：\r\n\r\n匹配损失（缩小对应点描述符距离）： \r\n非匹配损失（增大非对应点距离）：  Ltotal = Lmatches + Lnon-matches\r\n\r\n\r\n3. 自监督数据收集\r\n\r\n使用机械臂采集多视角图像，结合已知相机姿态和3D重建生成大量真实对应关系。\r\n通过背景随机化、数据增强、难负样本挖掘提升泛化能力。\r\n\r\n4. 跨物体损失与类别一致性\r\n\r\n引入跨物体损失使不同物体的描述符在特征空间中分离。\r\n网络能学习到类别一致性，即使外观不同（如不同颜色的帽子），描述符结构相似。\r\n\r\n\r\n三、定性结论\r\n\r\n无监督深度估计在缺乏真实深度标签时表现优异，甚至优于某些监督方法。\r\n自监督方法利用视频序列中的时序信息，进一步提升了深度估计的精度和鲁棒性。\r\n学习密集描述符比手工设计描述符更具表达力和适应性，适用于复杂场景下的特征匹配。\r\n表示学习方法在稀疏标注或无标注场景下显示出强大潜力，推动了视觉任务的实用化进程。\r\n\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"9. 光学和场景流","url":"/2025/10/25/9.%E5%85%89%E5%AD%A6%E5%92%8C%E5%9C%BA%E6%99%AF%E6%B5%81/","content":"本文借助ai完成，仅供参考。\r\n这篇题为《Optical and Scene Flow》的文档系统地介绍了光流的基本概念、数学模型、计算方法以及相关挑战。以下是对其内容的详细总结，重点包括重要公式和核心定性结论。\r\n\r\n一、基本概念与定义\r\n1. 光流（Optical Flow）\r\n\r\n定义：描述图像中每个像素在连续帧之间的表观运动的二维矢量场。\r\n成因：由相机与场景之间的相对运动引起。\r\n特点：是观测到的运动，不一定是真实的三维运动。\r\n\r\n2. 运动场（Motion Field）\r\n\r\n定义：三维场景中点的实际运动在图像平面上的投影。\r\n与光流的区别：运动场是理想的三维运动投影，是“真实值”；光流是从图像中估计出来的表观运动。\r\n关键结论：光流 ≠ 运动场。例如：\r\n\r\n均匀旋转的球体在固定光源下：运动场非零，光流为零。\r\n静止球体在移动光源下：光流非零，运动场为零。\r\n\r\n\r\n\r\n二、光流计算的基本假设与约束方程\r\n1. 亮度恒定假设（Brightness Constancy）\r\nI(x, y, t) = I(x + Δx, y + Δy, t + Δt) - 同一物体在不同帧中的表观亮度不变。\r\n2. 小运动假设（Small Motion）\r\n\r\n运动量 (Δx, Δy) 很小，可用一阶泰勒展开近似： I(x + Δx, y + Δy, t + Δt) ≈ I(x, y, t) + IxΔx + IyΔy + ItΔt\r\n代入亮度恒定假设，得到光流约束方程： Ixu + Iyv + It = 0 或写作： ∇I ⋅ u =  − It 其中：\r\nIx, Iy 是图像空间梯度；\r\nIt 是时间梯度；\r\nu = [u, v]T 是光流矢量。\r\n\r\n\r\n3. 孔径问题（Aperture Problem）\r\n\r\n光流约束方程只能确定光流在梯度方向（即法向）的分量，称为法向流（Normal Flow）。\r\n无法确定沿边缘方向的分量，导致解不唯一。\r\n直观理解：通过小孔观察运动物体时，只能感知到垂直于边缘的运动分量。\r\n\r\n图1\r\n\r\n\r\n\r\n三、Lucas-Kanade 方法\r\n1. 空间平滑性假设（Spatial Smoothness）\r\n\r\n邻域内像素的光流一致。\r\n在 N × N 窗口内构建多个约束方程，形成超定系统： Au = b 其中： \r\n\r\n2. 最小二乘解：\r\nuls = (ATA) − 1ATb\r\n\r\n3. 系统可解条件：\r\n\r\nATA 应满秩且条件数小。\r\n理想区域：纹理丰富、梯度方向多样（如角点）。\r\n问题区域：\r\n\r\n低纹理区：梯度小，系统不稳定；\r\n边缘区：梯度方向一致，条件数大，解不可靠。\r\n\r\n图2\r\n\r\n\r\n\r\n4.方法局限性\r\n\r\n对大运动、遮挡、亮度变化、运动边界敏感。\r\n窗口大小 N 的权衡：\r\n\r\n大窗口：包含更多结构，但可能跨越运动边界；\r\n小窗口：保持局部一致性，但可能无法解决孔径问题。\r\n\r\n\r\n\r\n总结\r\n本文系统介绍了光流的基本原理、数学模型（尤其是Lucas-Kanade方法）、孔径问题及其解决方案，并指出了实际应用中的局限性与挑战。核心贡献在于将光流估计问题转化为一个基于亮度恒定与小运动假设的优化问题，并通过空间平滑性假设缓解孔径问题。\r\n","categories":["计算机视觉"],"tags":["笔记"]},{"title":"Ciallo World","url":"/2025/10/16/hello-world/","content":"Ciallo～(∠・ω&lt; ) World！\r\n这是 bin 的第 1 篇博客，之后将随缘更新，包括但不限于各种笔记，总结，随笔杂谈等等。\r\n本网站在 Github Page 上部署（因为免费），使用 Hexo 管理页面，搭建过程中感谢：\r\n\r\nGithub Page\r\nHexo\r\nKeep 主题团队\r\nGemini\r\n众多无私分享经验的 知乎 / 独立博客 大佬\r\n\r\n为什么搭建个人博客？\r\n太无聊，又不想学习和写代码（）\r\n之后也会逐渐完善网站，包括 tag，分类，评论功能（虽然不一定会有人来评论）etc，但是……一切随缘吧。\r\n为什么不部署在知乎等文字平台？\r\n一是不够帅气，二是想保持更多的私密性和独立性，三是可以自己个性化，四是我就是爱折腾（）\r\n如何搭建个人博客？\r\n请参考 知乎，独立博客 等网上的详尽教程，并不是很麻烦。\r\n最后，希望能保持这个独立网站，然后以后有钱了没准可以换个更独立的域名（我看nibezihs.com这个域名不错，希望没人抢注了）\r\n"},{"title":"之前的笔记","url":"/2025/10/25/previous-notes/","content":"分享过去课程的笔记，考虑到版权原因，只会分享自己手写的笔记，部分课程老师讲义足够完备，没有记笔记，这里不会分享老师的讲义。\r\n\r\n大一上\r\n\r\n理论力学\r\n数学物理方法上\r\n\r\n大一下\r\n\r\n平衡态统计物理\r\n实验物理中的统计方法\r\n\r\n大二上\r\n\r\n电动力学\r\n数学物理方法下\r\n高等量子力学\r\n\r\n大二下\r\n\r\n广义相对论\r\n\r\n大二暑假\r\n\r\n随机过程\r\n凸优化\r\n\r\n","tags":["笔记"]},{"title":"读书记录","url":"/2025/11/06/%E8%AF%BB%E4%B9%A6%E8%AE%B0%E5%BD%95/","content":"为了抵御短视频等虚无主义娱乐侵袭，决定要培养更有意义的娱乐方式，也就是经过一段时间还能记起来的事情。之前很多想做的事情都想着在“赎身”之后再去做，但距离实现那一刻还需要漫长的等待，有些事情现在就可以做了，比如读书，特建立此记录，并从此之后记录读过的书。此外为起到纪念作用，还会尽可能地记录之前读过的书，记忆多有遗忘之处，但这更体现了建立此记录的必要性。\r\n此记录会包含各种类型的书籍，但专业书籍除外。看了一半没读完的书不会记录在内。2025-11-7之前的记录其时间是首次读的时间，2025-11-7之后会记录读相同书的多次时间。\r\n虽然现在这个书单太少太水了，但相信会逐渐丰富起来的。\r\n正在读的书（=拖了好久还没读完的书）\r\n\r\n献给阿尔吉侬的花束，丹尼尔·凯斯，11/6\r\n通向财务自由之路，范 K·撒普，10/26\r\n货币金融学，弗雷德里克·S·米什金，6/8\r\n政治学通识，包刚升，8/29\r\n八次危机中国的真实经验，温铁军，8/29\r\n筚路维艰，萧冬连，8/26\r\n股票大作手操盘术，利弗莫尔，10/26\r\n\r\n2025年读过的书\r\n\r\n经济学原理（宏观+微观），曼昆，4/7-6月底\r\n当代中国社会分层，李强，8/17-8月底\r\n\r\n2022-2024年读过的书\r\n没想起来，荒芜的年代\r\n初中时期读过的书\r\n\r\n活着，余华\r\n三体，刘慈欣\r\n平凡的世界，路遥\r\n许三观卖血记，余华\r\n在细雨中呼喊，余华\r\n兄弟，余华\r\n朝花夕拾，鲁迅\r\n水浒传，施耐庵\r\n骆驼祥子，老舍\r\n红星照耀中国，埃德加·斯诺埃\r\n解忧杂货店，东野圭吾\r\n简·爱，夏洛蒂·勃朗特\r\n红岩，罗广斌、杨益言\r\n蝇王，威廉·戈尔丁\r\n林海雪原，曲波\r\n刘慈欣的一些中短篇小说：超新星纪元，球状闪电，鲸歌，微观尽头，宇宙坍缩，带上她的眼睛，地火，流浪地球，乡村教师，微纪元，纤维，命运，信使，中国太阳，梦之海，朝闻道，天使时代，吞食者，西洋，诗云，光荣与梦想，地球大炮，思想者，镜子，赡养上帝，欢乐颂，赡养人类，山，时间移民\r\n鲁迅的一些中短篇小说\r\n逻辑学导论，陈波\r\n\r\n小学或初中时期读过的书，具体什么时候忘了\r\n\r\n追风筝的人，卡勒德·胡赛尼\r\n动物农场，乔治·奥威尔\r\n灿烂千阳，卡勒德·胡赛尼\r\n格列佛游记，乔纳森·斯威夫特\r\n杀死一只知更鸟，哈珀·李\r\n地心游记，儒勒·凡尔纳\r\n\r\n小学时期读过的书\r\n\r\n三国演义，罗贯中\r\n明朝那些事儿，当年明月\r\n哈利·波特，J.K.罗琳\r\n西游记，吴承恩\r\n鲁滨逊漂流记，丹尼尔·笛福\r\n海底两万里，儒勒·凡尔纳\r\n钢铁是怎样炼成的，奥斯特洛夫斯基\r\n汤姆叔叔的小屋，哈里特·比彻·斯托\r\n假如给我三天光明，海伦·凯勒\r\n汤姆·索亚历险记，马克·吐温\r\n\r\n","tags":["记录"]},{"title":"量子力学讨论班","url":"/2025/10/27/%E9%87%8F%E5%AD%90%E5%8A%9B%E5%AD%A6%E8%AE%A8%E8%AE%BA%E7%8F%AD/","content":"这是量子力学讨论课上的报告\r\n"}]